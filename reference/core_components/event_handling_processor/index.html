
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Event Processing">
      
      
      
        <link rel="canonical" href="https://docs.opencqrs.com/reference/core_components/event_handling_processor/">
      
      
        <link rel="prev" href="../command_router/">
      
      
        <link rel="next" href="../../extension_points/">
      
      
      <link rel="icon" href="../../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>Event Handling Processor - OpenCQRS</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Event Handling Processor - OpenCQRS" >
      
        <meta  property="og:description"  content="Event Processing" >
      
        <meta  property="og:image"  content="https://docs.opencqrs.com/assets/images/social/reference/core_components/event_handling_processor/index.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.opencqrs.com/reference/core_components/event_handling_processor/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Event Handling Processor - OpenCQRS" >
      
        <meta  name="twitter:description"  content="Event Processing" >
      
        <meta  name="twitter:image"  content="https://docs.opencqrs.com/assets/images/social/reference/core_components/event_handling_processor/index.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#event-processing-loop" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://www.opencqrs.com" title="OpenCQRS" class="md-header__button md-logo" aria-label="OpenCQRS" data-md-component="logo">
      
  <img src="../../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenCQRS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Event Handling Processor
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/open-cqrs/opencqrs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tutorials/" class="md-tabs__link">
          
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../howto/" class="md-tabs__link">
          
  
    
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../concepts/" class="md-tabs__link">
          
  
    
  
  Concepts

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.opencqrs.com" title="OpenCQRS" class="md-nav__button md-logo" aria-label="OpenCQRS" data-md-component="logo">
      
  <img src="../../../images/logo.png" alt="logo">

    </a>
    OpenCQRS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/open-cqrs/opencqrs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../tutorials/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/01_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up the Environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/02_command_handling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handling Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/03_domain_logic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing the Domain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/04_book_reminder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Handling Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/05_catalog_projection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building Read Models from Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/06_testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing the Domain
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../howto/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/explicit_type_registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Registering explicit Event Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/scaling_event_processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scaling Event Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/upcaster_single_event/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upcasting a Single Event
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/abstract_type_persistence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Persisting Abstract Event Classes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Event Representations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exception Handling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Core Components
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Core Components
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../esdb_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ESDB Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../event_repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Event Repository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../command_router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command Router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Event Handling Processor
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Event Handling Processor
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#event-processing-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Event Processing Loop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-and-retry" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling and Retry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spring-boot-auto-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Spring Boot Auto-Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../extension_points/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Extension Points
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Extension Points
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extension_points/command_handler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Definining Command Handlers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extension_points/state_rebuilding_handler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Defining State Rebuilding Handlers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extension_points/event_handler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Defining Event Handlers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/event_sourcing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Event Sourcing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/upcasting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Event Upcasting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#event-processing-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Event Processing Loop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling-and-retry" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling and Retry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spring-boot-auto-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Spring Boot Auto-Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Event Handling Processor</h1>

<p>The <code>framework</code> <a href="../../modules/">module</a> provides <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a>
as the core component for <a href="../../extension_points/event_handler/">asynchronous event handling</a>. Once executed on a worker thread it 
is responsible for dispatching any existing or newly published events in order to suitable <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandler.html" title="com.opencqrs.framework.eventhandler.EventHandler" style="color: inherit;"><code>EventHandler</code></a>
instances for <a href="../../../concepts/event_sourcing/#projecting-a-read-model">read model projection</a>, as depicted exemplarily in the following diagram:</p>
<p><img alt="Event Dispatching" src="01_ehp_basic.svg" /></p>
<p>Multiple <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> instances are typically configured and spawned for different sets
of grouped <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandler.html" title="com.opencqrs.framework.eventhandler.EventHandler" style="color: inherit;"><code>EventHandler</code></a> instances. Each group then independently observes the event stream and processes
the events at its own speed. The <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> tracks the progress of the last event -
successfully processed by its processing group - by means of a configured <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/progress/ProgressTracker.html" title="com.opencqrs.framework.eventhandler.progress.ProgressTracker" style="color: inherit;"><code>ProgressTracker</code></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/progress/ProgressTracker.html" title="com.opencqrs.framework.eventhandler.progress.ProgressTracker" style="color: inherit;"><code>ProgressTracker</code></a> implementation storing its progress within persistent
storage, such as a database, should be used to enable the <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a>
to continue after interruption or termination of its worker thread, for example after restart of the <abbr title="Java Virtual Machine">JVM</abbr>.</p>
</div>
<p>The following diagram depicts two independent processing groups at different positions within the event stream:</p>
<p><img alt="Multiple Event Processing Groups" src="02_ehp_groups.svg" /></p>
<div class="admonition tip">
<p class="admonition-title">Fail-Over and Horizontal Scaling</p>
<p><a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> instances can be configured to 
<a href="../../../howto/scaling_event_processing/">scale horizontally and provide suitable fail-over</a>. Horizontal scaling is achieved by assigning
multiple instances to the same processing group using different partitions, effectively splitting up the event stream.</p>
</div>
<h2 id="event-processing-loop">Event Processing Loop</h2>
<p>Event processing (once started) comprises the following steps:</p>
<ol>
<li>determining the latest position (progress) within the global event stream up to which events have been processed previously for this group and partition, if available</li>
<li>starting to consume and observe any newer events starting from that position</li>
<li><a href="../../../concepts/upcasting/">upcasting</a> and deserializing the event, if necessary</li>
<li>determining if an event needs to be handled by this partition, otherwise skipping it because it is relevant for another partition</li>
<li>determining and calling suitable <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandler.html" title="com.opencqrs.framework.eventhandler.EventHandler" style="color: inherit;"><code>EventHandler</code></a> instances, otherwise skipping the event because it isn't relevant for the processing group</li>
<li>retrying event handlers failing with non-persistent errors</li>
<li>updating the progress within the global event stream, if all <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandler.html" title="com.opencqrs.framework.eventhandler.EventHandler" style="color: inherit;"><code>EventHandler</code></a> instances succeeded or the event was skipped</li>
<li>continuing with next available event, until the event processing loop is interrupted or terminated</li>
</ol>
<h2 id="error-handling-and-retry">Error Handling and Retry</h2>
<p>Errors occurring within the event processing loop may either terminate the event processing loop or are subject to retry, according to the following
criteria:</p>
<table>
<thead>
<tr>
<th>Origin</th>
<th>Exception</th>
<th>Example</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandler.html" title="com.opencqrs.framework.eventhandler.EventHandler" style="color: inherit;"><code>EventHandler</code></a></td>
<td><a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/CqrsFrameworkException.NonTransientException.html" title="com.opencqrs.framework.CqrsFrameworkException.NonTransientException" style="color: inherit;"><code>NonTransientException</code></a> or any sub-class</td>
<td>event handler projection logic calling framework components throwing <a href="../../exceptions/">non-recoverable errors</a></td>
<td>processing loop terminated</td>
</tr>
<tr>
<td><a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandler.html" title="com.opencqrs.framework.eventhandler.EventHandler" style="color: inherit;"><code>EventHandler</code></a></td>
<td>any other <code>java.lang.Throwable</code> or sub-class</td>
<td>any other application-specific exception thrown</td>
<td>event subject to retry</td>
</tr>
<tr>
<td>framework component(s)</td>
<td><a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/CqrsFrameworkException.TransientException.html" title="com.opencqrs.framework.CqrsFrameworkException.TransientException" style="color: inherit;"><code>TransientException</code></a> or any sub-class</td>
<td><a href="../../exceptions/">recoverable errors</a> such as connection errors while observing events</td>
<td>event subject to retry</td>
</tr>
<tr>
<td>any</td>
<td><code>java.lang.InterruptedException</code> or <code>java.util.RejectedExecutionException</code> or any sub-class</td>
<td>thread interruption while shutting down the <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a></td>
<td>processing loop terminated</td>
</tr>
<tr>
<td>framework component(s)</td>
<td>any other <code>java.lang.Throwable</code> or sub-class</td>
<td>unexpected errors, for instance failure to update the progress</td>
<td>processing loop terminated</td>
</tr>
</tbody>
</table>
<p>In case of a recoverable error, events may be <em>retried</em>. In that case a configurable <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/BackOff.html" title="com.opencqrs.framework.eventhandler.BackOff" style="color: inherit;"><code>BackOff</code></a> instance determines
the back-off delay, before the event is actually reprocessed. This delay may change (i.e. increase exponentially) for every retry attempt for the same event and
may as well signal the event to be skipped, if <code>-1</code> is returned. Skipped events will no longer be retried and the event processing loop continues with the next
event, after updating its progress.</p>
<div class="admonition warning">
<p class="admonition-title">At-least-once Delivery and Event Handler Idempotency</p>
<p>Event processing logic contained within <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandler.html" title="com.opencqrs.framework.eventhandler.EventHandler" style="color: inherit;"><code>EventHandler</code></a> instances is assumed to be idempotent, in
order to be <em>retryable</em> for a specific event. This is due to the fact, that, first of all, <em>all relevant</em> <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandler.html" title="com.opencqrs.framework.eventhandler.EventHandler" style="color: inherit;"><code>EventHandler</code></a> instances
are retried, not only the one originally failing. Secondly, the event processing loop may terminate unexpectedly, before being able to update its
progress, which in turn will result in a repeated event handling for the event in question. The <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a>
effectively guarantees <a href="https://www.cloudcomputingpatterns.org/at_least_once_delivery/">at-least-once delivery</a> with respect to event handling.</p>
</div>
<h2 id="configuration">Configuration</h2>
<p>An instance of <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> can be obtained,
either by manually instantiating and starting it (per group and partition) or using Spring Boot autoconfiguration.</p>
<h3 id="manual-configuration">Manual Configuration</h3>
<p>An instance of <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> can be created providing the necessary
configuration properties:</p>
<ul>
<li>the active partition number to be assigned to (starting from zero)</li>
<li>the subject to observe for existing or new events published</li>
<li>a flag indicating if the subject shall be observed <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/esdb/client/Option.Recursive.html" title="com.opencqrs.esdb.client.Option.Recursive" style="color: inherit;"><code>Recursive</code></a> or not</li>
<li>an <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/persistence/EventReader.html" title="com.opencqrs.framework.persistence.EventReader" style="color: inherit;"><code>EventReader</code></a> instance for observing <a href="../../events/">events</a></li>
<li>a <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/progress/ProgressTracker.html" title="com.opencqrs.framework.eventhandler.progress.ProgressTracker" style="color: inherit;"><code>ProgressTracker</code></a> instance tracking the processing progress for the processing group and specified partition</li>
<li>an <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/partitioning/EventSequenceResolver.html" title="com.opencqrs.framework.eventhandler.partitioning.EventSequenceResolver" style="color: inherit;"><code>EventSequenceResolver</code></a> instance to derive a sequence id from an event</li>
<li>a <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/partitioning/PartitionKeyResolver.html" title="com.opencqrs.framework.eventhandler.partitioning.PartitionKeyResolver" style="color: inherit;"><code>PartitionKeyResolver</code></a> instance derive the assigned partition number from an event's sequence id</li>
<li>a list of <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlerDefinition.html" title="com.opencqrs.framework.eventhandler.EventHandlerDefinition" style="color: inherit;"><code>EventHandlerDefinition</code></a> instances belonging the same processing group</li>
<li>a <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/BackOff.html" title="com.opencqrs.framework.eventhandler.BackOff" style="color: inherit;"><code>BackOff</code></a> instance used to determine the back-off delay before retrying failed event handlers</li>
</ul>
<p>The following example shows, how to instantiate and start an <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> using
a provided <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/persistence/EventReader.html" title="com.opencqrs.framework.persistence.EventReader" style="color: inherit;"><code>EventReader</code></a> and a list of <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlerDefinition.html" title="com.opencqrs.framework.eventhandler.EventHandlerDefinition" style="color: inherit;"><code>EventHandlerDefinition</code></a>
(containing the <a href="../../extension_points/event_handler/">event handling logic</a>). The example applies the following additional configuration settings:</p>
<ul>
<li>a single partition (<code>0</code>) is used to handle all events (<a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/partitioning/DefaultPartitionKeyResolver.html" title="com.opencqrs.framework.eventhandler.partitioning.DefaultPartitionKeyResolver" style="color: inherit;"><code>DefaultPartitionKeyResolver</code></a> with <code>1</code> active partition)</li>
<li>events sharing the same subject are processed sequentially (<a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/partitioning/PerSubjectEventSequenceResolver.html" title="com.opencqrs.framework.eventhandler.partitioning.PerSubjectEventSequenceResolver" style="color: inherit;"><code>PerSubjectEventSequenceResolver</code></a>), which is irrelevant as long as only one active partition is used</li>
<li>events are observed from the root subject <code>/</code> recursively</li>
<li>progress is tracked in-memory, i.e. all events will be reprocessed upon restart of the <abbr title="Java Virtual Machine">JVM</abbr> (<a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/progress/InMemoryProgressTracker.html" title="com.opencqrs.framework.eventhandler.progress.InMemoryProgressTracker" style="color: inherit;"><code>InMemoryProgressTracker</code></a>)</li>
<li>events will be retried infinitely with a static back-off interval of 1000 ms</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.opencqrs.framework.eventhandler.partitioning.DefaultPartitionKeyResolver</span><span class="p">;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.opencqrs.framework.eventhandler.partitioning.PerSubjectEventSequenceResolver</span><span class="p">;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.opencqrs.framework.eventhandler.progress.InMemoryProgressTracker</span><span class="p">;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">com.opencqrs.framework.persistence.EventReader</span><span class="p">;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EventHandlingProcessorConfiguration</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">EventHandlingProcessor</span><span class="w"> </span><span class="nf">eventHandlingProcessor</span><span class="p">(</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">            </span><span class="n">EventReader</span><span class="w"> </span><span class="n">eventReader</span><span class="p">,</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">            </span><span class="n">List</span><span class="o">&lt;</span><span class="n">EventHandlerDefinition</span><span class="o">&gt;</span><span class="w"> </span><span class="n">eventHandlerDefinitions</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">EventHandlingProcessor</span><span class="p">(</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">                </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">                </span><span class="s">&quot;/&quot;</span><span class="p">,</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">                </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">                </span><span class="n">eventReader</span><span class="p">,</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">InMemoryProgressTracker</span><span class="p">(),</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">PerSubjectEventSequenceResolver</span><span class="p">(),</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">DefaultPartitionKeyResolver</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">                </span><span class="n">eventHandlerDefinitions</span><span class="p">,</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">                </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">1000</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="p">}</span>
</span></code></pre></div>
<p>The <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> can be verified by starting it asynchronously as follows:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">eventHandlingProcessor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eventHandlingProcessor</span><span class="p">(...);</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">eventHandlingProcessor</span><span class="p">).</span><span class="na">start</span><span class="p">();</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="spring-boot-auto-configuration">Spring Boot Auto-Configuration</h3>
<p>For Spring Boot applications using the <code>framework-spring-boot-starter</code> <a href="../../modules/">module</a>
<a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessorAutoConfiguration.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessorAutoConfiguration" style="color: inherit;"><code>EventHandlingProcessorAutoConfiguration</code></a> provides
fully configured <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> Spring beans per
processing group for all <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlerDefinition.html" title="com.opencqrs.framework.eventhandler.EventHandlerDefinition" style="color: inherit;"><code>EventHandlerDefinition</code></a> Spring beans
defined within the same Spring application context.</p>
<p>The processor beans can be fully configured using <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProperties.html" title="com.opencqrs.framework.eventhandler.EventHandlingProperties" style="color: inherit;"><code>EventHandlingProperties</code></a>.
The configuration provides suitable defaults, which may be overridden for all processing groups and/or per individual processing group,
e.g. as follows:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># settings applying to all processing groups</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="na">opencqrs.event-handling.standard.retry.policy</span><span class="o">=</span><span class="s">exponential_backoff</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="na">opencqrs.event-handling.standard.retry.max-attempts</span><span class="o">=</span><span class="s">5</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1"># settings applying to processing group &#39;books&#39; only</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="na">opencqrs.event-handling.groups.books.fetch.subject</span><span class="o">=</span><span class="s">/books</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="na">opencqrs.event-handling.groups.books.life-cycle.partitions</span><span class="o">=</span><span class="s">2</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="c1"># settings applying to processing group &#39;backup&#39; only</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="na">opencqrs.event-handling.groups.backup.life-cycle.auto-start</span><span class="o">=</span><span class="s">false</span>
</span></code></pre></div>
<p>With that configuration in place autoconfigured <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlingProcessor.html" title="com.opencqrs.framework.eventhandler.EventHandlingProcessor" style="color: inherit;"><code>EventHandlingProcessor</code></a> instances
will be configured for all processing groups (based on the <a href="https://docs.opencqrs.com/javadoc/com/opencqrs/framework/eventhandler/EventHandlerDefinition.html" title="com.opencqrs.framework.eventhandler.EventHandlerDefinition" style="color: inherit;"><code>EventHandlerDefinition</code></a> beans within the Spring context) as follows:</p>
<ul>
<li>all failed events will be retried up to 5 times with exponentially increasing delays</li>
<li>all processors, except those for the 'backup' processing group, will be started automatically</li>
<li>all processors, except those for the 'books' processing group, will observe events from <code>/</code> recursively</li>
<li>for the 'books' processing group:<ul>
<li>events will be observed from <code>/books</code> only</li>
<li>two processor instances will be spawned each of them processing one of the two configured partitions independently</li>
</ul>
</li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../command_router/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Command Router">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Command Router
              </div>
            </div>
          </a>
        
        
          
          <a href="../../extension_points/" class="md-footer__link md-footer__link--next" aria-label="Next: Extension Points">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Extension Points
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 OpenCQRS and contributors
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://blog.digitalfrontiers.de" target="_blank" rel="noopener" title="blog.digitalfrontiers.de" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32 123.7 0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32m0 96c0 17.7 14.3 32 32 32 70.7 0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7 0-32 14.3-32 32m-96 16c0-26.5-21.5-48-48-48S0 117.5 0 144v224c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144h-16v96h16c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48z"/></svg>
    </a>
  
    
    
    
    
    <a href="https:/x.com/dxfrontiers" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/digital-frontiers-gmbh-co-kg" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.footer", "navigation.tabs", "navigation.indexes", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../../js/open_external_in_new_tab.js"></script>
      
    
  </body>
</html>